# Note that optimization doesn't work on all machines
gfortran           = gfortran
FFLAGS        = -fPIC
LIBRARY	= libcernlib.so
LIBDIR  = ../../lib/
SOURCES = abend.o dlsqp2.o lenocc.o mtlprt.o mtlset.o radmul.o

all: $(LIBDIR)$(LIBRARY)

%.o : %.f makefile
	$(gfortran) $(FFLAGS) -c $<

$(LIBDIR)$(LIBRARY): $(SOURCES)
	gfortran -shared -o $(LIBRARY) $^
	mv $(LIBRARY) $(LIBDIR)